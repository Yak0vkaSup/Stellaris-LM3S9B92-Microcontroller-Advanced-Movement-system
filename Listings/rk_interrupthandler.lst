


ARM Macro Assembler    Page 1 


    1 00000000         
    2 00000000         ; see page 109
    3 00000000 E000E100 
                       EN0     EQU              0xE000E100  ; page 136-137 numb
                                                            er 13
    4 00000000 E000E104 
                       EN1     EQU              0xE000E104
    5 00000000         
    6 00000000 4002C000 
                       QEI0_BASE
                               EQU              0x4002C000  ; right
    7 00000000 4002D000 
                       QEI1_BASE
                               EQU              0x4002D000  ; left
    8 00000000         
    9 00000000 40025000 
                       GPIO_PORTF_BASE
                               EQU              0x40025000
   10 00000000 40007000 
                       GPIO_PORTD_BASE
                               EQU              0x40007000
   11 00000000         
   12 00000000 00000010 
                       LED1_BIT
                               EQU              0x10
   13 00000000 00000020 
                       LED2_BIT
                               EQU              0x20
   14 00000000         
   15 00000000 00000028 
                       QEIISC_OFFSET
                               EQU              0x028
   16 00000000 00000418 
                       GPIOMIS_OFFSET
                               EQU              0x418
   17 00000000 00000020 
                       QEIINTEN_OFFSET
                               EQU              0x020
   18 00000000 0000041C 
                       GPIOICR_OFFSET
                               EQU              0x41C
   19 00000000         
   20 00000000 00000008 
                       QEIPOS_OFFSET
                               EQU              0x008
   21 00000000 40028000 
                       PWM_BASE
                               EQU              0x040028000
   22 00000000 40028058 
                       PWM0CMPA
                               EQU              PWM_BASE+0x058
   23 00000000 40028098 
                       PWM1CMPA
                               EQU              PWM_BASE+0x098
   24 00000000         
   25 00000000                 AREA             |.text|, CODE, READONLY
   26 00000000                 ENTRY
   27 00000000         
   28 00000000                 EXPORT           INTERRUPT_INIT



ARM Macro Assembler    Page 2 


   29 00000000                 EXPORT           INTERRUPT_HANDLER_0
   30 00000000                 EXPORT           INTERRUPT_HANDLER_1
   31 00000000                 EXPORT           PORTD_INTERRUPT_HANDLER
   32 00000000         
   33 00000000         INTERRUPT_INIT
   34 00000000         
   35 00000000 4E18            ldr              r6, = EN0
   36 00000002 F242 0008       mov              r0, #0x2008
   37 00000006 6030            str              r0, [r6]
   38 00000008         
   39 00000008 4E17            ldr              r6, = EN1
   40 0000000A F04F 0040       mov              r0, #0x40   ; 32 - 36 page 137
   41 0000000E 6030            str              r0, [r6]
   42 00000010         
   43 00000010         ;ldr r6, = QEI0_BASE+QEIINTEN_OFFSET
   44 00000010         ;mov r0, #0x2
   45 00000010         ;str r0, [r6]
   46 00000010         
   47 00000010 4E16            ldr              r6, = QEI1_BASE+QEIINTEN_OFFSET
   48 00000012 F04F 0002       mov              r0, #0x2
   49 00000016 6030            str              r0, [r6]
   50 00000018         
   51 00000018         
   52 00000018 4770            BX               LR
   53 0000001A         
   54 0000001A         PORTD_INTERRUPT_HANDLER
   55 0000001A 4915            ldr              r1, = GPIO_PORTD_BASE+GPIOMIS_O
FFSET
   56 0000001C 6808            ldr              r0, [r1]
   57 0000001E B140            cbz              r0, exit_portd_hadler
   58 00000020         
   59 00000020 4A14            ldr              r2, = GPIO_PORTD_BASE+GPIOICR_O
FFSET
   60 00000022 F04F 00C0       mov              r0, 0xC0
   61 00000026 6010            str              r0, [r2]
   62 00000028         
   63 00000028 4A13            ldr              r2, =GPIO_PORTF_BASE + (LED1_BI
T << 2)
   64 0000002A 6810            ldr              r0, [r2]
   65 0000002C F080 0010       eor              r0, r0, #LED1_BIT
   66 00000030 6010            str              r0, [r2]
   67 00000032         
   68 00000032         exit_portd_hadler
   69 00000032 4770            BX               LR
   70 00000034         
   71 00000034         INTERRUPT_HANDLER_0
   72 00000034         
   73 00000034 4911            ldr              r1, = QEI0_BASE+QEIISC_OFFSET
   74 00000036         ;nop
   75 00000036 6808            ldr              r0, [r1]    ;architecture defec
                                                            t, the execution is
                                                             faster than interr
                                                            upt that NVIC has n
                                                            o 
   76 00000038         ;time to remove a flag and we add one additional reading
                        to fix that
   77 00000038 B138            cbz              r0, exit_handler_0 ; if r0 is 0
                                                            , so no flag we jus
                                                            t exit



ARM Macro Assembler    Page 3 


   78 0000003A F04F 0002       mov              r0, #0x2
   79 0000003E 6008            str              r0, [r1]
   80 00000040         
   81 00000040 4A0D            ldr              r2, =GPIO_PORTF_BASE + (LED1_BI
T << 2)
   82 00000042 6810            ldr              r0, [r2]
   83 00000044 F080 0010       eor              r0, r0, #LED1_BIT
   84 00000048 6010            str              r0, [r2]
   85 0000004A         exit_handler_0
   86 0000004A 4770            BX               LR
   87 0000004C         
   88 0000004C         INTERRUPT_HANDLER_1
   89 0000004C 490C            ldr              r1, = QEI1_BASE+QEIISC_OFFSET
   90 0000004E         ;nop
   91 0000004E 6808            ldr              r0, [r1]    ;architecture defec
                                                            t, the execution is
                                                             faster than interr
                                                            upt that NVIC has n
                                                            o 
   92 00000050         ;time to remove a flag and we add one additional reading
                        to fix that*
   93 00000050 B138            cbz              r0, exit_handler_1
   94 00000052 F04F 0002       mov              r0, #0x2
   95 00000056 6008            str              r0, [r1]
   96 00000058         
   97 00000058 4B0A            ldr              r3, =GPIO_PORTF_BASE + (LED2_BI
T << 2)
   98 0000005A 6818            ldr              r0, [r3]
   99 0000005C F080 0020       eor              r0, r0, #LED2_BIT
  100 00000060 6018            str              r0, [r3]
  101 00000062         exit_handler_1
  102 00000062 4770            BX               LR
  103 00000064         
                       
              E000E100 
              E000E104 
              4002D020 
              40007418 
              4000741C 
              40025040 
              4002C028 
              4002D028 
              40025080 
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M3 --apcs=interw
ork --depend=.\objects\rk_interrupthandler.d -o.\objects\rk_interrupthandler.o 
-I.\RTE\_Target_1 -IC:\Users\Yakov\AppData\Local\Arm\Packs\ARM\CMSIS\5.5.1\CMSI
S\Core\Include -IC:\Users\Yakov\AppData\Local\Arm\Packs\ARM\CMSIS\5.5.1\Device\
ARM\ARMCM3\Include --predefine="__EVAL SETA 1" --predefine="__MICROLIB SETA 1" 
--predefine="__UVISION_VERSION SETA 528" --predefine="_RTE_ SETA 1" --predefine
="ARMCM3 SETA 1" --list=.\listings\rk_interrupthandler.lst RK_InterruptHandler.
s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

.text 00000000

Symbol: .text
   Definitions
      At line 25 in file RK_InterruptHandler.s
   Uses
      None
Comment: .text unused
INTERRUPT_HANDLER_0 00000034

Symbol: INTERRUPT_HANDLER_0
   Definitions
      At line 71 in file RK_InterruptHandler.s
   Uses
      At line 29 in file RK_InterruptHandler.s
Comment: INTERRUPT_HANDLER_0 used once
INTERRUPT_HANDLER_1 0000004C

Symbol: INTERRUPT_HANDLER_1
   Definitions
      At line 88 in file RK_InterruptHandler.s
   Uses
      At line 30 in file RK_InterruptHandler.s
Comment: INTERRUPT_HANDLER_1 used once
INTERRUPT_INIT 00000000

Symbol: INTERRUPT_INIT
   Definitions
      At line 33 in file RK_InterruptHandler.s
   Uses
      At line 28 in file RK_InterruptHandler.s
Comment: INTERRUPT_INIT used once
PORTD_INTERRUPT_HANDLER 0000001A

Symbol: PORTD_INTERRUPT_HANDLER
   Definitions
      At line 54 in file RK_InterruptHandler.s
   Uses
      At line 31 in file RK_InterruptHandler.s
Comment: PORTD_INTERRUPT_HANDLER used once
exit_handler_0 0000004A

Symbol: exit_handler_0
   Definitions
      At line 85 in file RK_InterruptHandler.s
   Uses
      At line 77 in file RK_InterruptHandler.s
Comment: exit_handler_0 used once
exit_handler_1 00000062

Symbol: exit_handler_1
   Definitions
      At line 101 in file RK_InterruptHandler.s
   Uses
      At line 93 in file RK_InterruptHandler.s
Comment: exit_handler_1 used once
exit_portd_hadler 00000032

Symbol: exit_portd_hadler



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

   Definitions
      At line 68 in file RK_InterruptHandler.s
   Uses
      At line 57 in file RK_InterruptHandler.s
Comment: exit_portd_hadler used once
8 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Absolute symbols

EN0 E000E100

Symbol: EN0
   Definitions
      At line 3 in file RK_InterruptHandler.s
   Uses
      At line 35 in file RK_InterruptHandler.s
Comment: EN0 used once
EN1 E000E104

Symbol: EN1
   Definitions
      At line 4 in file RK_InterruptHandler.s
   Uses
      At line 39 in file RK_InterruptHandler.s
Comment: EN1 used once
GPIOICR_OFFSET 0000041C

Symbol: GPIOICR_OFFSET
   Definitions
      At line 18 in file RK_InterruptHandler.s
   Uses
      At line 59 in file RK_InterruptHandler.s
Comment: GPIOICR_OFFSET used once
GPIOMIS_OFFSET 00000418

Symbol: GPIOMIS_OFFSET
   Definitions
      At line 16 in file RK_InterruptHandler.s
   Uses
      At line 55 in file RK_InterruptHandler.s
Comment: GPIOMIS_OFFSET used once
GPIO_PORTD_BASE 40007000

Symbol: GPIO_PORTD_BASE
   Definitions
      At line 10 in file RK_InterruptHandler.s
   Uses
      At line 55 in file RK_InterruptHandler.s
      At line 59 in file RK_InterruptHandler.s

GPIO_PORTF_BASE 40025000

Symbol: GPIO_PORTF_BASE
   Definitions
      At line 9 in file RK_InterruptHandler.s
   Uses
      At line 63 in file RK_InterruptHandler.s
      At line 81 in file RK_InterruptHandler.s
      At line 97 in file RK_InterruptHandler.s

LED1_BIT 00000010

Symbol: LED1_BIT
   Definitions
      At line 12 in file RK_InterruptHandler.s
   Uses
      At line 63 in file RK_InterruptHandler.s
      At line 65 in file RK_InterruptHandler.s



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Absolute symbols

      At line 81 in file RK_InterruptHandler.s
      At line 83 in file RK_InterruptHandler.s

LED2_BIT 00000020

Symbol: LED2_BIT
   Definitions
      At line 13 in file RK_InterruptHandler.s
   Uses
      At line 97 in file RK_InterruptHandler.s
      At line 99 in file RK_InterruptHandler.s

PWM0CMPA 40028058

Symbol: PWM0CMPA
   Definitions
      At line 22 in file RK_InterruptHandler.s
   Uses
      None
Comment: PWM0CMPA unused
PWM1CMPA 40028098

Symbol: PWM1CMPA
   Definitions
      At line 23 in file RK_InterruptHandler.s
   Uses
      None
Comment: PWM1CMPA unused
PWM_BASE 40028000

Symbol: PWM_BASE
   Definitions
      At line 21 in file RK_InterruptHandler.s
   Uses
      At line 22 in file RK_InterruptHandler.s
      At line 23 in file RK_InterruptHandler.s

QEI0_BASE 4002C000

Symbol: QEI0_BASE
   Definitions
      At line 6 in file RK_InterruptHandler.s
   Uses
      At line 73 in file RK_InterruptHandler.s
Comment: QEI0_BASE used once
QEI1_BASE 4002D000

Symbol: QEI1_BASE
   Definitions
      At line 7 in file RK_InterruptHandler.s
   Uses
      At line 47 in file RK_InterruptHandler.s
      At line 89 in file RK_InterruptHandler.s

QEIINTEN_OFFSET 00000020

Symbol: QEIINTEN_OFFSET
   Definitions
      At line 17 in file RK_InterruptHandler.s



ARM Macro Assembler    Page 3 Alphabetic symbol ordering
Absolute symbols

   Uses
      At line 47 in file RK_InterruptHandler.s
Comment: QEIINTEN_OFFSET used once
QEIISC_OFFSET 00000028

Symbol: QEIISC_OFFSET
   Definitions
      At line 15 in file RK_InterruptHandler.s
   Uses
      At line 73 in file RK_InterruptHandler.s
      At line 89 in file RK_InterruptHandler.s

QEIPOS_OFFSET 00000008

Symbol: QEIPOS_OFFSET
   Definitions
      At line 20 in file RK_InterruptHandler.s
   Uses
      None
Comment: QEIPOS_OFFSET unused
16 symbols
361 symbols in table
